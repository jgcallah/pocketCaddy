<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <title>PocketCaddy</title>
    <base href="/PocketCaddy/" />
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="PocketCaddy.styles.css" rel="stylesheet" />
  </head>
  <script src="scripts.js"></script>
  <script>
    // Force iOS to save current state when app backgrounds
    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === "hidden") {
        localStorage.setItem("lastSaved", Date.now());
      }
    });

    // Force iOS to update the app preview with current content
    function updateAppSnapshot() {
      // This tricks iOS into taking a fresh snapshot
      const dummy = document.createElement("div");
      dummy.style.visibility = "hidden";
      document.body.appendChild(dummy);
      setTimeout(() => {
        document.body.removeChild(dummy);
      }, 100);
    }

    // Update snapshot when app backgrounds
    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === "hidden") {
        updateAppSnapshot();
      }
    });
  </script>
  <body>
    <div id="app">
      <svg class="loading-progress">
        <circle r="40%" cx="50%" cy="50%" />
        <circle r="40%" cx="50%" cy="50%" />
      </svg>
      <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
      An unhandled error has occurred.
      <a href="." class="reload">Reload</a>
      <span class="dismiss">ðŸ—™</span>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
  </body>
</html>
